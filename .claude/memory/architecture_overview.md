# AI Smart Diet Lens - æ¶æ„æ€»è§ˆ (Architecture Overview)

> **æ–‡æ¡£ç±»å‹**: ç³»ç»Ÿæ¶æ„è®¾è®¡
> **ç»´æŠ¤è€…**: Architect
> **æ›´æ–°æ—¥æœŸ**: 2026-02-03
> **çŠ¶æ€**: âœ… å½“å‰æœ‰æ•ˆ

---

## ğŸ“ æ¶æ„åŸåˆ™ (Architecture Principles)

### æ ¸å¿ƒå“²å­¦

```
è§†å›¾ä¸é€»è¾‘åˆ†ç¦» â†’ ç»„ä»¶åŒ–è®¾è®¡ â†’ ç±»å‹å®‰å…¨ â†’ å“åº”å¼æ•°æ®æµ
```

### å››å¤§æ”¯æŸ±

| æ”¯æŸ± | åŸåˆ™ | æ”¶ç›Š |
|:-----|:-----|:-----|
| **1. ç»„ä»¶åŒ–è®¾è®¡** | é¡µé¢æ‹†åˆ†ä¸ºå¯å¤ç”¨ç»„ä»¶ | ä»£ç å¤ç”¨ã€ç»´æŠ¤ç®€å• |
| **2. ç±»å‹å®‰å…¨** | 100% TypeScript | ç¼–è¯‘æ—¶é”™è¯¯æ£€æŸ¥ã€IDE æ”¯æŒ |
| **3. å“åº”å¼æ•°æ®æµ** | Vue 3 Composition API + Pinia | çŠ¶æ€å¯è¿½æº¯ã€å•å‘æ•°æ®æµ |
| **4. é€‚é…å™¨æ¨¡å¼** | API è°ƒç”¨é€šè¿‡æœåŠ¡å±‚æŠ½è±¡ | è§£è€¦ã€æ˜“æµ‹è¯•ã€æ˜“æ›¿æ¢ |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„ (System Architecture)

### 1ï¸âƒ£ æ•´ä½“æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    AI Smart Diet Lens ç³»ç»Ÿæ¶æ„                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ç”¨æˆ·ç«¯ (Client)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     ç§»åŠ¨ç«¯ H5 / PWA (Vue 3 SPA)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å‰ç«¯åº”ç”¨ (Frontend)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Pages (é¡µé¢å±‚)                             â”‚    â”‚
â”‚  â”‚  - Splash: å¯åŠ¨é¡µ                                      â”‚    â”‚
â”‚  â”‚  - Onboarding: ç”¨æˆ·å¼•å¯¼                                â”‚    â”‚
â”‚  â”‚  - Home: é¦–é¡µä»ªè¡¨ç›˜                                    â”‚    â”‚
â”‚  â”‚  - Scan: AI é£Ÿç‰©è¯†åˆ«                                   â”‚    â”‚
â”‚  â”‚  - FoodResult: è¥å…»è¯¦æƒ…                                â”‚    â”‚
â”‚  â”‚  - Diary: é¥®é£Ÿæ—¥è®°                                     â”‚    â”‚
â”‚  â”‚  - Wiki: é£Ÿæç™¾ç§‘                                      â”‚    â”‚
â”‚  â”‚  - RecipeDetail: é£Ÿè°±è¯¦æƒ…                              â”‚    â”‚
â”‚  â”‚  - ShoppingList: è´­ç‰©æ¸…å•                              â”‚    â”‚
â”‚  â”‚  - Profile: ä¸ªäººä¸­å¿ƒ                                   â”‚    â”‚
â”‚  â”‚  - Achievements: æˆå°±ç³»ç»Ÿ                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â†‘ ä½¿ç”¨                              â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Components (ç»„ä»¶å±‚)                          â”‚    â”‚
â”‚  â”‚  - BottomNav: åº•éƒ¨å¯¼èˆªç»„ä»¶                             â”‚    â”‚
â”‚  â”‚  - (å¾…æ‰©å±•) CalorieRing: çƒ­é‡ç¯å½¢å›¾ç»„ä»¶                â”‚    â”‚
â”‚  â”‚  - (å¾…æ‰©å±•) FoodCard: é£Ÿç‰©å¡ç‰‡ç»„ä»¶                     â”‚    â”‚
â”‚  â”‚  - (å¾…æ‰©å±•) MacroBar: è¥å…»ç´ è¿›åº¦æ¡ç»„ä»¶                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â†‘ è°ƒç”¨                              â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Composables (ç»„åˆå¼å‡½æ•°å±‚) [å¾…å®ç°]          â”‚    â”‚
â”‚  â”‚  - useAuth: ç”¨æˆ·è®¤è¯é€»è¾‘                               â”‚    â”‚
â”‚  â”‚  - useNutrition: è¥å…»è®¡ç®—é€»è¾‘                          â”‚    â”‚
â”‚  â”‚  - useFoodRecognition: AI é£Ÿç‰©è¯†åˆ«                     â”‚    â”‚
â”‚  â”‚  - useDiary: é¥®é£Ÿæ—¥è®°ç®¡ç†                              â”‚    â”‚
â”‚  â”‚  - useAchievements: æˆå°±ç³»ç»Ÿé€»è¾‘                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â†‘ è°ƒç”¨                              â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Stores (Pinia çŠ¶æ€ç®¡ç†) [å¾…å®ç°]             â”‚    â”‚
â”‚  â”‚  - userStore: ç”¨æˆ·çŠ¶æ€                                 â”‚    â”‚
â”‚  â”‚  - nutritionStore: è¥å…»æ•°æ®çŠ¶æ€                        â”‚    â”‚
â”‚  â”‚  - diaryStore: é¥®é£Ÿæ—¥è®°çŠ¶æ€                            â”‚    â”‚
â”‚  â”‚  - settingsStore: åº”ç”¨è®¾ç½®çŠ¶æ€                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â†‘ è°ƒç”¨                              â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Services (æœåŠ¡å±‚) [å¾…å®ç°]                   â”‚    â”‚
â”‚  â”‚  - apiService: HTTP è¯·æ±‚å°è£…                           â”‚    â”‚
â”‚  â”‚  - geminiService: Gemini AI API è°ƒç”¨                   â”‚    â”‚
â”‚  â”‚  - storageService: æœ¬åœ°å­˜å‚¨æœåŠ¡                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                             â†‘ è°ƒç”¨                              â”‚
â”‚                             â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚            Types (ç±»å‹å®šä¹‰) [å¾…å®ç°]                    â”‚    â”‚
â”‚  â”‚  - user.ts: ç”¨æˆ·ç›¸å…³ç±»å‹                               â”‚    â”‚
â”‚  â”‚  - food.ts: é£Ÿç‰©/è¥å…»ç›¸å…³ç±»å‹                          â”‚    â”‚
â”‚  â”‚  - diary.ts: é¥®é£Ÿæ—¥è®°ç±»å‹                              â”‚    â”‚
â”‚  â”‚  - achievement.ts: æˆå°±ç³»ç»Ÿç±»å‹                        â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â†“ HTTP/REST
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      å¤–éƒ¨æœåŠ¡ (External Services)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              Google Gemini API                          â”‚    â”‚
â”‚  â”‚  - é£Ÿç‰©å›¾åƒè¯†åˆ«                                        â”‚    â”‚
â”‚  â”‚  - è¥å…»æˆåˆ†åˆ†æ                                        â”‚    â”‚
â”‚  â”‚  - AI å¯¹è¯åŠ©æ‰‹                                         â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              åç«¯æœåŠ¡ (Future) [å¾…å®ç°]                 â”‚    â”‚
â”‚  â”‚  - ç”¨æˆ·è®¤è¯                                            â”‚    â”‚
â”‚  â”‚  - æ•°æ®æŒä¹…åŒ–                                          â”‚    â”‚
â”‚  â”‚  - ç¤¾åŒºåŠŸèƒ½                                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ ç›®æ ‡ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ components/                  # å¯å¤ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ common/                  # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ BottomNav.vue        # åº•éƒ¨å¯¼èˆª
â”‚   â”‚   â”œâ”€â”€ CalorieRing.vue      # çƒ­é‡ç¯å½¢å›¾
â”‚   â”‚   â”œâ”€â”€ MacroBar.vue         # è¥å…»ç´ è¿›åº¦æ¡
â”‚   â”‚   â””â”€â”€ LoadingSpinner.vue   # åŠ è½½åŠ¨ç”»
â”‚   â”œâ”€â”€ food/                    # é£Ÿç‰©ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ FoodCard.vue         # é£Ÿç‰©å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ FoodScanner.vue      # é£Ÿç‰©æ‰«æå™¨
â”‚   â”‚   â””â”€â”€ NutritionPanel.vue   # è¥å…»é¢æ¿
â”‚   â””â”€â”€ diary/                   # æ—¥è®°ç›¸å…³ç»„ä»¶
â”‚       â”œâ”€â”€ MealSection.vue      # é¤æ¬¡åŒºå—
â”‚       â””â”€â”€ DaySelector.vue      # æ—¥æœŸé€‰æ‹©å™¨
â”‚
â”œâ”€â”€ composables/                 # ç»„åˆå¼å‡½æ•°
â”‚   â”œâ”€â”€ useAuth.ts               # è®¤è¯é€»è¾‘
â”‚   â”œâ”€â”€ useNutrition.ts          # è¥å…»è®¡ç®—
â”‚   â”œâ”€â”€ useFoodRecognition.ts    # AI è¯†åˆ«
â”‚   â”œâ”€â”€ useDiary.ts              # æ—¥è®°ç®¡ç†
â”‚   â””â”€â”€ useAchievements.ts       # æˆå°±é€»è¾‘
â”‚
â”œâ”€â”€ stores/                      # Pinia çŠ¶æ€ç®¡ç†
â”‚   â”œâ”€â”€ user.ts                  # ç”¨æˆ·çŠ¶æ€
â”‚   â”œâ”€â”€ nutrition.ts             # è¥å…»æ•°æ®
â”‚   â”œâ”€â”€ diary.ts                 # æ—¥è®°çŠ¶æ€
â”‚   â””â”€â”€ settings.ts              # åº”ç”¨è®¾ç½®
â”‚
â”œâ”€â”€ services/                    # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ api.ts                   # HTTP è¯·æ±‚åŸºç¡€å°è£…
â”‚   â”œâ”€â”€ gemini.ts                # Gemini API æœåŠ¡
â”‚   â””â”€â”€ storage.ts               # æœ¬åœ°å­˜å‚¨æœåŠ¡
â”‚
â”œâ”€â”€ types/                       # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ user.ts                  # ç”¨æˆ·ç±»å‹
â”‚   â”œâ”€â”€ food.ts                  # é£Ÿç‰©ç±»å‹
â”‚   â”œâ”€â”€ diary.ts                 # æ—¥è®°ç±»å‹
â”‚   â””â”€â”€ achievement.ts           # æˆå°±ç±»å‹
â”‚
â”œâ”€â”€ utils/                       # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ format.ts                # æ ¼å¼åŒ–å·¥å…·
â”‚   â”œâ”€â”€ calculate.ts             # è®¡ç®—å·¥å…· (BMRç­‰)
â”‚   â””â”€â”€ validate.ts              # éªŒè¯å·¥å…·
â”‚
â”œâ”€â”€ pages/                       # é¡µé¢ç»„ä»¶ (ç°æœ‰)
â”‚   â”œâ”€â”€ Splash.vue
â”‚   â”œâ”€â”€ Onboarding.vue
â”‚   â”œâ”€â”€ Home.vue
â”‚   â”œâ”€â”€ Scan.vue
â”‚   â”œâ”€â”€ FoodResult.vue
â”‚   â”œâ”€â”€ Diary.vue
â”‚   â”œâ”€â”€ Wiki.vue
â”‚   â”œâ”€â”€ RecipeDetail.vue
â”‚   â”œâ”€â”€ ShoppingList.vue
â”‚   â”œâ”€â”€ Profile.vue
â”‚   â””â”€â”€ Achievements.vue
â”‚
â”œâ”€â”€ router/                      # è·¯ç”±é…ç½® (ç°æœ‰)
â”‚   â””â”€â”€ index.ts
â”‚
â”œâ”€â”€ assets/                      # é™æ€èµ„æº [å¾…åˆ›å»º]
â”‚   â”œâ”€â”€ images/
â”‚   â””â”€â”€ icons/
â”‚
â”œâ”€â”€ App.vue                      # æ ¹ç»„ä»¶
â”œâ”€â”€ main.ts                      # åº”ç”¨å…¥å£
â””â”€â”€ vite-env.d.ts               # Vite ç±»å‹å£°æ˜
```

---

## ğŸ”„ æ ¸å¿ƒæ•°æ®æµ (Data Flow)

### AI é£Ÿç‰©è¯†åˆ«æµç¨‹

```
ç”¨æˆ·æ“ä½œ (Scan.vue)
    â†“
ç‚¹å‡»æ‹ç…§æŒ‰é’®
    â†“
è°ƒç”¨ useFoodRecognition().recognize(imageData)  â† Composable
    â†“
nutritionStore.setLoading(true)                 â† Pinia Store
    â†“
geminiService.analyzeFood(imageData)            â† Service
    â†“
HTTP POST to Gemini API                         â†’ External API
    â†“
Response: { food, confidence, nutrition }       â† API Response
    â†“
nutritionStore.setCurrentFood(result)           â† æ›´æ–°çŠ¶æ€
    â†“
router.push('/result')                          â† å¯¼èˆªåˆ°ç»“æœé¡µ
    â†“
FoodResult.vue å“åº”å¼æ›´æ–°                        â† Vue å“åº”å¼ç³»ç»Ÿ
```

### é¥®é£Ÿæ—¥è®°è®°å½•æµç¨‹

```
ç”¨æˆ·æ“ä½œ (FoodResult.vue)
    â†“
ç‚¹å‡» "è®°å½•åˆ°æ—¥è®°"
    â†“
è°ƒç”¨ useDiary().addEntry(foodItem)              â† Composable
    â†“
diaryStore.addEntry({ meal, food, portion })    â† Pinia Store
    â†“
storageService.saveDiary(diaryData)             â† æœ¬åœ°æŒä¹…åŒ–
    â†“
diaryStore.updateTodaySummary()                 â† æ›´æ–°ç»Ÿè®¡
    â†“
Diary.vue è‡ªåŠ¨æ›´æ–°æ˜¾ç¤º                           â† Vue å“åº”å¼
```

---

## ğŸ“¦ æŠ€æœ¯æ ˆè¯¦ç»†æ¸…å• (Tech Stack Details)

### å½“å‰å·²å®ç°

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|:-----|:-----|:-----|:-----|
| **æ¡†æ¶** | Vue 3 | ^3.4.0 | å“åº”å¼å‰ç«¯æ¡†æ¶ |
| **è¯­è¨€** | TypeScript | ~5.8.2 | ç±»å‹å®‰å…¨ |
| **è·¯ç”±** | Vue Router | ^4.3.0 | å®¢æˆ·ç«¯è·¯ç”± |
| **æ„å»º** | Vite | 6.2.0 | æ„å»ºå·¥å…· |
| **æ ·å¼** | Tailwind CSS | 3.x (CDN) | åŸå­åŒ– CSS |
| **å›¾æ ‡** | Material Symbols | - | Google å›¾æ ‡åº“ |
| **å­—ä½“** | Manrope + Noto Sans SC | - | ä¸­è‹±æ–‡å­—ä½“ |

### å¾…é›†æˆ

| ç±»åˆ« | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|:-----|:-----|:-----|:-----|
| **çŠ¶æ€ç®¡ç†** | Pinia | ^2.1.0 | å…¨å±€çŠ¶æ€ç®¡ç† |
| **AI æœåŠ¡** | Gemini API | - | é£Ÿç‰©è¯†åˆ« |
| **æµ‹è¯•** | Vitest | ^1.0.0 | å•å…ƒæµ‹è¯• |
| **E2E æµ‹è¯•** | Cypress | ^13.0.0 | ç«¯åˆ°ç«¯æµ‹è¯• |
| **æŒä¹…åŒ–** | pinia-plugin-persistedstate | - | çŠ¶æ€æŒä¹…åŒ– |

---

## ğŸ¯ é¡µé¢åŠŸèƒ½çŸ©é˜µ (Page Feature Matrix)

| é¡µé¢ | å½“å‰çŠ¶æ€ | å¾…å®ç°åŠŸèƒ½ |
|:-----|:--------|:----------|
| **Splash** | âœ… UI å®Œæˆ | åŠ è½½åŠ¨ç”»ä¼˜åŒ– |
| **Onboarding** | âœ… UI å®Œæˆ | BMR è®¡ç®—é€»è¾‘ã€ç”¨æˆ·æ•°æ®å­˜å‚¨ |
| **Home** | âœ… UI å®Œæˆ | çœŸå®æ•°æ®ç»‘å®šã€Pinia çŠ¶æ€ |
| **Scan** | âœ… UI å®Œæˆ | ç›¸æœºè°ƒç”¨ã€Gemini API é›†æˆ |
| **FoodResult** | âœ… UI å®Œæˆ | è¥å…»æ•°æ®å±•ç¤ºã€æ—¥è®°ä¿å­˜ |
| **Diary** | âœ… UI å®Œæˆ | æ—¥è®° CRUDã€å‘¨è§†å›¾æ•°æ® |
| **Wiki** | âœ… UI å®Œæˆ | æœç´¢åŠŸèƒ½ã€æ•°æ®åº“é›†æˆ |
| **RecipeDetail** | âœ… UI å®Œæˆ | æ­¥éª¤è¿½è¸ªã€è¯­éŸ³æ’­æŠ¥ |
| **ShoppingList** | âœ… UI å®Œæˆ | æŒä¹…åŒ–å­˜å‚¨ã€åˆ†äº«åŠŸèƒ½ |
| **Profile** | âœ… UI å®Œæˆ | ç”¨æˆ·æ•°æ®ç®¡ç†ã€è®¾ç½®æŒä¹…åŒ– |
| **Achievements** | âœ… UI å®Œæˆ | æˆå°±è§£é”é€»è¾‘ã€è¿›åº¦è®¡ç®— |

---

## ğŸ” ç±»å‹å®šä¹‰è§„èŒƒ (Type Definitions)

### æ ¸å¿ƒç±»å‹ç¤ºä¾‹

```typescript
// types/user.ts
export interface User {
  id: string
  nickname: string
  avatar: string
  height: number       // cm
  weight: number       // kg
  age: number
  gender: 'male' | 'female'
  goal: 'lose' | 'maintain' | 'gain'
  bmr: number          // åŸºç¡€ä»£è°¢ç‡
  targetCalories: number
  streak: number       // è¿ç»­æ‰“å¡å¤©æ•°
  level: number
  createdAt: Date
}

// types/food.ts
export interface FoodItem {
  id: string
  name: string
  nameEn?: string
  image: string
  calories: number     // kcal per 100g
  protein: number      // g per 100g
  carbs: number        // g per 100g
  fat: number          // g per 100g
  fiber?: number
  sugar?: number
  sodium?: number
  aiScore?: number     // AI å¥åº·è¯„åˆ† 0-100
  benefits?: string[]  // å¥åº·ç›Šå¤„æ ‡ç­¾
}

export interface FoodEntry {
  id: string
  foodItem: FoodItem
  portion: number      // g
  meal: 'breakfast' | 'lunch' | 'dinner' | 'snack'
  timestamp: Date
  note?: string
}

// types/diary.ts
export interface DailyDiary {
  date: string         // YYYY-MM-DD
  entries: FoodEntry[]
  totalCalories: number
  totalProtein: number
  totalCarbs: number
  totalFat: number
  targetCalories: number
  waterCups: number
  steps: number
  sleepHours: number
  mood: 'great' | 'good' | 'okay' | 'bad'
}

// types/achievement.ts
export interface Achievement {
  id: string
  name: string
  description: string
  icon: string
  color: string
  unlocked: boolean
  unlockedAt?: Date
  progress?: number    // 0-100
  requirement: number
}
```

---

## ğŸš€ å¼€å‘ä¼˜å…ˆçº§ (Development Priorities)

### Phase 1: åŸºç¡€æ¶æ„ (Foundation)

1. **Pinia çŠ¶æ€ç®¡ç†é›†æˆ**
   - å®‰è£…å¹¶é…ç½® Pinia
   - åˆ›å»º userStore, nutritionStore, diaryStore
   - é…ç½®æŒä¹…åŒ–æ’ä»¶

2. **ç±»å‹ç³»ç»Ÿå®Œå–„**
   - åˆ›å»º types/ ç›®å½•
   - å®šä¹‰æ‰€æœ‰æ ¸å¿ƒç±»å‹
   - è¿ç§»ç°æœ‰ç»„ä»¶å†…ç±»å‹

3. **æœåŠ¡å±‚æ­å»º**
   - åˆ›å»º apiService åŸºç¡€å°è£…
   - åˆ›å»º storageService (localStorage)

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (Core Features)

4. **Gemini API é›†æˆ**
   - åˆ›å»º geminiService
   - å®ç°é£Ÿç‰©è¯†åˆ«åŠŸèƒ½
   - é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶

5. **é¥®é£Ÿæ—¥è®°åŠŸèƒ½**
   - å®ç° useDiary composable
   - è¿æ¥ diaryStore
   - æœ¬åœ°æ•°æ®æŒä¹…åŒ–

6. **è¥å…»è®¡ç®—åŠŸèƒ½**
   - å®ç° useNutrition composable
   - BMR è®¡ç®—
   - æ¯æ—¥è¥å…»æ±‡æ€»

### Phase 3: è¿›é˜¶åŠŸèƒ½ (Advanced Features)

7. **æˆå°±ç³»ç»Ÿ**
   - å®ç° useAchievements
   - è§£é”é€»è¾‘
   - è¿›åº¦è¿½è¸ª

8. **ç›¸æœºåŠŸèƒ½**
   - è°ƒç”¨è®¾å¤‡ç›¸æœº
   - å›¾ç‰‡å‹ç¼©å¤„ç†
   - é”™è¯¯å¤„ç†

### Phase 4: æµ‹è¯•ä¸ä¼˜åŒ– (Testing & Optimization)

9. **å•å…ƒæµ‹è¯•**
   - é…ç½® Vitest
   - Composables æµ‹è¯•
   - Store æµ‹è¯•

10. **æ€§èƒ½ä¼˜åŒ–**
    - ç»„ä»¶æ‡’åŠ è½½
    - å›¾ç‰‡ä¼˜åŒ–
    - ç¼“å­˜ç­–ç•¥

---

## ğŸ“ Builder ä»»åŠ¡æ¸…å• (Builder Task List)

### ç«‹å³å¯å¼€å§‹çš„ä»»åŠ¡

| ä»»åŠ¡ ID | ä»»åŠ¡æè¿° | ä¼˜å…ˆçº§ | é¢„è®¡å·¥ä½œé‡ |
|:--------|:--------|:-------|:----------|
| **T-001** | å®‰è£…é…ç½® Pinia | P0 | 1h |
| **T-002** | åˆ›å»º types/ ç›®å½•å’Œæ ¸å¿ƒç±»å‹å®šä¹‰ | P0 | 2h |
| **T-003** | åˆ›å»º userStore (ç”¨æˆ·çŠ¶æ€) | P0 | 2h |
| **T-004** | åˆ›å»º storageService (æœ¬åœ°å­˜å‚¨) | P0 | 1h |
| **T-005** | é‡æ„ Home.vue ä½¿ç”¨ Pinia çŠ¶æ€ | P1 | 2h |
| **T-006** | åˆ›å»º nutritionStore (è¥å…»æ•°æ®) | P1 | 2h |
| **T-007** | åˆ›å»º diaryStore (æ—¥è®°çŠ¶æ€) | P1 | 2h |
| **T-008** | å®ç° useNutrition composable | P1 | 3h |

### ä»»åŠ¡ä¾èµ–å…³ç³»

```
T-001 (Pinia é…ç½®)
  â†“
T-002 (ç±»å‹å®šä¹‰) â”€â”€â†’ T-003 (userStore) â”€â”€â†’ T-005 (Homeé‡æ„)
  â†“                     â†“
T-004 (storageService)  T-006 (nutritionStore) â”€â”€â†’ T-008 (useNutrition)
                        â†“
                    T-007 (diaryStore)
```

---

## ğŸ“ å¼€å‘è€…æŒ‡å— (Developer Guide)

### ä»£ç è§„èŒƒ

1. **ç»„ä»¶å‘½å**: PascalCase (e.g., `FoodCard.vue`)
2. **Composables å‘½å**: camelCase + use å‰ç¼€ (e.g., `useNutrition.ts`)
3. **Store å‘½å**: camelCase + Store åç¼€ (e.g., `userStore`)
4. **ç±»å‹å‘½å**: PascalCase (e.g., `FoodItem`)
5. **æ³¨é‡Šè¯­è¨€**: ç®€ä½“ä¸­æ–‡

### Composition API è§„èŒƒ

```vue
<script setup lang="ts">
// 1. å¯¼å…¥
import { ref, computed, onMounted } from 'vue'
import { useRouter } from 'vue-router'
import { useUserStore } from '@/stores/user'
import type { FoodItem } from '@/types/food'

// 2. Props & Emits
const props = defineProps<{
  foodId: string
}>()

const emit = defineEmits<{
  (e: 'select', item: FoodItem): void
}>()

// 3. Store & Router
const router = useRouter()
const userStore = useUserStore()

// 4. å“åº”å¼çŠ¶æ€
const loading = ref(false)
const foodItem = ref<FoodItem | null>(null)

// 5. è®¡ç®—å±æ€§
const displayCalories = computed(() => {
  return foodItem.value?.calories ?? 0
})

// 6. æ–¹æ³•
const handleSelect = () => {
  if (foodItem.value) {
    emit('select', foodItem.value)
  }
}

// 7. ç”Ÿå‘½å‘¨æœŸ
onMounted(() => {
  // åˆå§‹åŒ–é€»è¾‘
})
</script>
```

---

**æ–‡æ¡£ç»´æŠ¤è€…**: Architect
**æœ€åæ›´æ–°**: 2026-02-03
**ä¸‹æ¬¡å®¡æŸ¥**: 2026-03-03
